<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QLTSGeek - Trang ôn thi trắc nghiệm</title>
    <link rel="stylesheet" href="style.css">  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<body>
    <div class="container">
        <header class="top-nav">
            <div class="logo">
                <a href="/">QLTSGeek</a>
            </div>

            <div class="search-bar">
                <i class="fas fa-search"></i> <input type="text" placeholder="Tìm kiếm bài kiểm tra, chủ đề...">
            </div>

            <div class="user-info">
              <img src="/default-avatar.png" alt="Avatar" class="avatar" id="userAvatar">
              <div class="user-details">
                <span id="userName">Chưa đăng nhập</span>
                <span class="role" id="userRole">Khách</span>
              </div>
               <div class="user-dropdown">
                  <a href="#"><i class="fas fa-user"></i> Hồ sơ</a>
                  <a href="#"><i class="fas fa-cog"></i> Cài đặt</a>
                  <a href="#"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
                </div>
            </div>

        </header>

        <aside class="sidebar">
            <nav>
                <ul>
                    <li><a href="#"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="#"><i class="fas fa-book"></i> Study for MCT</a></li>
                    <li><a href="#"><i class="fas fa-stethoscope"></i> Study for OSCE</a></li>
                    <li><a href="#"><i class="fas fa-clipboard-list"></i> Cheat Sheet</a></li>
                    <li><a href="#"><i class="fas fa-users"></i> OLTS Social</a></li>
                    <li><a href="#"><i class="fas fa-chalkboard-teacher"></i> Tutor Support</a></li>
                    <li><a href="#"><i class="fas fa-check-circle"></i> Eligibility Criteria</a></li>
                    <li><a href="#"><i class="fas fa-question-circle"></i> Help</a></li>
                    <li><a href="#"><i class="fas fa-cogs"></i> Setting</a></li>
                    <li><a href="#"><i class="fas fa-headset"></i> Support</a></li>
                    <li><a href="#"><i class="fas fa-book-open"></i> Library</a></li>
                    <li><a href="#"><i class="fas fa-envelope"></i> Message</a></li>
                </ul>
            </nav>
        </aside>

        <main class="content">
          <section>
             <h2 class= "section-title">Mock Test</h2>
             <div class="grid">
                <div class="card">
                    <h3>Civil Litigation</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Criminal Litigation</h3>
                    <p>0 Completed</p>
                    <button class="btn">Take Test</button>
                </div>
              <div class="card">
                    <h3>Business Law</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Property Law</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Civil Litigation</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Criminal Litigation</h3>
                    <p>0 Completed</p>
                    <button class="btn">Take Test</button>
                </div>
              <div class="card">
                    <h3>Business Law</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Property Law</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>

             </div>
             <div class="view-more">
                <a href="#">View More ></a>
            </div>
          </section>
          <section>
             <h2 class= "section-title">Practice Questions</h2>
             <div class="grid">
                <div class="card">
                    <h3>Civil Litigation</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Criminal Litigation</h3>
                    <p>0 Completed</p>
                    <button class="btn">Take Test</button>
                </div>
              <div class="card">
                    <h3>Business Law</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Property Law</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Civil Litigation</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Criminal Litigation</h3>
                    <p>0 Completed</p>
                    <button class="btn">Take Test</button>
                </div>
              <div class="card">
                    <h3>Business Law</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>
                <div class="card">
                    <h3>Property Law</h3>
                    <p>Completed</p>
                    <button class="btn">Take Test</button>
                </div>

             </div>
             <div class="view-more">
                <a href="#">View More ></a>
            </div>
          </section>
            </main>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Kiểm tra trạng thái đăng nhập
        const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        const user = JSON.parse(localStorage.getItem('user') || '{}');
        
        if (isLoggedIn && user) {
          // Cập nhật ảnh đại diện cho cả header và home
          const avatars = document.querySelectorAll('.avatar');
          if (user.profile_picture) {
            const profilePictureUrl = `http://localhost:3000${user.profile_picture}`;
            avatars.forEach(avatar => {
              avatar.src = profilePictureUrl;
              // Thêm xử lý lỗi khi ảnh không tải được
              avatar.onerror = function() {
                this.src = '/default-avatar.png';
              };
            });
          }
          
          // Cập nhật tên người dùng
          const userNameElements = document.querySelectorAll('#userName, #headerUserName');
          userNameElements.forEach(element => {
            element.textContent = user.username;
          });
          
          // Cập nhật vai trò
          const userRoleElements = document.querySelectorAll('#userRole, #headerUserRole');
          userRoleElements.forEach(element => {
            element.textContent = user.role === 'admin' ? 'Quản trị viên' : 'Người dùng';
          });
        }
      });
    </script>
</body>
</html>